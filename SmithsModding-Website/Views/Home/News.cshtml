@using Microsoft.AspNet.Identity
@using SmithsModding_Website.Models
@model NewsItemModels
@{
    ViewBag.Title = "News";
}
<head>
    <link rel="stylesheet" type="text/css" href="~/Content/NewsStyle.css" />
</head>
@Html.ValidationSummary("", new { @class = "text-danger" })
<div class="container" style="display:flex">
    <div class="col-2-8" style="width:calc(2/3 * 100%)">
        <div class="container-news">
            <div class="container-news-header" style="display:flex">
                <div class="col-2-4" style="width:50%">
                    Latest News
                </div>
                @if (User.IsInRole("Administrators"))
                {
                    <div class="col-1-4" style="width:50%; text-align:right">
                        <a href="#newItem" data-toggle="modal"><span class="glyphicon glyphicon-plus-sign"></span> Add Item</a>
                    </div>
                }
            </div>
            <div class="container-news-stream" style="height:555px">
                <ol class="news-feed">
                    @if (Model.Items.Count > 0)
                    {
                        foreach (NewsItem item in Model.Items)
                        {
                            <li class="news-entry">
                                <div class="news-header">
                                    <b>@item.Title</b>
                                    <b>@(item.Author == null)</b>
                                </div>
                                <br />
                                <div class="news-content">
                                    @item.Post
                                </div>
                            </li>
                        }
                    }
                </ol>
            </div>
        </div>
    </div>
    <div class="col-2-4" style="width:calc(1/3 * 100%)">
        <a class="twitter-timeline" href="https://twitter.com/SmithsModding" data-widget-id="691771088263602176" , data-chrome="nofooter">Tweets by SmithsModding</a>
        <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
    </div>
</div>
@using (Html.BeginForm("News", "Home", FormMethod.Post))
{
    <div id="newItem" class="modal fade new-news" role="form">
        @Html.AntiForgeryToken()
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add a News Item</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    @Html.LabelFor(m => m.newNewsItem.Title, new { @class = "col-sm-2 control-label" })
                    <div class="col-sm-10">
                        @Html.TextBoxFor(m => m.newNewsItem.Title, new { @class = "form-control" })
                    </div>
                </div>
                <br />
                <div class="row">
                    @Html.LabelFor(m => m.newNewsItem.Post, new { @class = "col-sm-2 control-label" })
                    <div class="col-sm-10">
                        @Html.TextAreaFor(m => m.newNewsItem.Post, new { @class = "form-control wider" })
                    </div>
                </div>
                <div class="row">
                    <div id="charNum" class="col-sm-12" style="text-align:right">

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <input type="submit" value="Submit" class="btn btn-default" />
            </div>
        </div>
    </div>
}
